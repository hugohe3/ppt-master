# SVG 图表模板库

本目录包含标准化的 SVG 图表模板，用于提高生成质量和设计一致性。所有模板遵循 `docs/design_guidelines.md` 的设计规范。

## 📋 目录

- [使用方式](#使用方式)
- [模板列表](#模板列表)
- [通用规范](#通用规范)
- [自定义指南](#自定义指南)

---

## 使用方式

### 1. 选择合适的模板

根据数据类型和展示目标选择：

| 数据类型 | 推荐模板 | 使用场景 |
|---------|---------|---------|
| 关键指标 | KPI 卡片 | 展示数字、增长率、对比 |
| 分类对比 | 柱状图 | 3-8个类别的数值比较 |
| 构成对比 | 堆叠柱状图 | 多类别构成、占比趋势 |
| 趋势分析 | 折线图 | 时间序列、趋势变化 |
| 双量纲趋势 | 双Y轴折线图 | 两个不同单位指标的时序对比 |
| 占比分析 | 环形图 | 3-6个部分的比例展示 |
| 多维评估 | 雷达图 | 能力评估、竞品对比 |
| 流程转化 | 漏斗图 | 转化率、用户旅程 |
| 四象限分析 | 矩阵图 | 波士顿矩阵、风险评估 |
| 时序事件 | 时间轴 | 历史演进、里程碑 |
| 项目进度 | 甘特图 | 项目管理、任务排期 |
| 业务流程 | 流程图 | 流程步骤、决策树 |
| 层级关系 | 组织结构图 | 公司架构、团队结构 |

### 2. 复制并修改

1. 将对应模板文件复制到项目中
2. 根据实际数据修改数值和文本
3. 按需调整颜色、尺寸等参数
4. 保持模板的基础结构和布局逻辑

### 3. 画布适配

所有模板默认为 **1280×720 (16:9)** 画布。其他画布格式请参考 `docs/canvas_formats.md`，按比例调整：

- **PPT 4:3 (1024×768)**：宽度缩放至 80%
- **小红书 3:4 (1242×1660)**：竖屏布局，元素垂直排列
- **方形 1:1 (1080×1080)**：居中布局，调整边距
- **Story 9:16 (1080×1920)**：竖屏长图，增加垂直间距

---

## 模板列表

### 1. KPI 卡片 (kpi_cards.svg)

**用途**：展示关键业绩指标

**特点**：
- 支持 2×2 或 1×4 布局
- 大号数字 (48-56px)
- 趋势箭头和百分比
- 同比/环比说明

**适用场景**：
- 财务指标总览
- 业务数据看板
- 增长率展示

### 2. 柱状图 (bar_chart.svg)

**用途**：类别数据对比

**特点**：
- 支持 3-8 个柱子
- 柱宽 40-60px，间距合理
- 数值标签自动对齐
- 可选网格线

**适用场景**：
- 销售额对比
- 区域/产品排名
- 年度数据对比

### 3. 折线图 (line_chart.svg)

**用途**：趋势和变化展示

**特点**：
- 线条粗细 2-3px
- 数据点圆形标记 (半径 4-6px)
- 网格线 1px 浅灰色
- 支持多条折线对比

**适用场景**：
- 时间序列分析
- 增长趋势
- 多指标对比

### 4. 环形图 (donut_chart.svg)

**用途**：占比和构成分析

**特点**：
- 支持 3-6 个分块
- 起始角度 -90° (12点方向)
- 环形宽度 40-60px
- 百分比标签清晰
- 中心可显示总计数据

**适用场景**：
- 市场份额分析
- 预算分配展示
- 结构占比分析
- 类别构成展示

### 5. 漏斗图 (funnel_chart.svg)

**用途**：转化流程分析

**特点**：
- 3-5 个阶段
- 渐变色填充
- 转化率自动计算
- 损失标注

**适用场景**：
- 销售漏斗
- 用户转化
- 流程效率

### 6. 矩阵图 (matrix_2x2.svg)

**用途**：四象限分析

**特点**：
- 2×2 布局
- 坐标轴清晰
- 象限标签
- 数据点可定制

**适用场景**：
- 波士顿矩阵
- 风险评估
- 优先级分析

### 7. 时间轴 (timeline.svg)

**用途**：时序事件展示

**特点**：
- 水平或垂直布局
- 节点标记清晰
- 连接线统一
- 支持 3-8 个节点

**适用场景**：
- 项目里程碑
- 历史演进
- 产品路线图

### 8. 流程图 (process_flow.svg)

**用途**：业务流程、操作步骤展示

**特点**：
- 标准化步骤卡片（200×80px）
- 决策节点菱形设计
- 箭头方向清晰（支持回环）
- 时间统计信息面板
- 三种节点类型：流程步骤、决策判断、异常处理

**适用场景**：
- 业务流程图示
- 操作指南步骤
- 决策流程
- 项目工作流

### 9. 双Y轴折线图 (dual_axis_line_chart.svg)

**用途**：展示两个不同量纲指标的时序变化

**特点**：
- 左右两个Y轴，独立刻度
- 支持不同线型区分（实线+虚线）
- 支持不同数据点标记（圆点+方块）
- 阶段分隔线和标注背景框
- 关键数据点标注，避免重叠
- 数据点阴影效果

**适用场景**：
- 温湿度监控曲线
- 销量与利润率对比
- 流量与转化率分析
- 产量与能耗关系
- 任何需要双量纲对比的时序数据

### 10. 雷达图 (radar_chart.svg)

**用途**：多维度能力评估、综合对比分析

**特点**：
- 支持 4-8 个评估维度
- 六边形/多边形网格背景（可配置5层）
- 多数据系列对比（半透明填充）
- 数据点圆形标记，带边框
- 维度标签沿外围分布

**适用场景**：
- 能力素质评估
- 竞品综合对比
- 员工绩效分析
- 产品特性雷达

### 11. 堆叠柱状图 (stacked_bar_chart.svg)

**用途**：多类别构成对比、占比趋势分析

**特点**：
- 支持 3-6 个堆叠类别
- 支持 4-8 组数据对比
- 类别颜色区分清晰
- 顶部显示总计数值
- 图例说明各类别含义

**适用场景**：
- 收入/成本构成分析
- 市场份额变化
- 预算分配对比
- 时期构成变化

### 12. 组织结构图 (org_chart.svg)

**用途**：层级关系展示、组织架构可视化

**特点**：
- 支持 2-4 层层级结构
- 卡片式节点设计（圆角矩形）
- 清晰的连接线（垂直+水平）
- 可配置颜色区分层级/部门
- 节点内容支持姓名、职位、人数

**适用场景**：
- 公司组织架构
- 团队成员结构
- 汇报关系展示
- 项目团队构成

### 13. 甘特图 (gantt_chart.svg)

**用途**：项目进度规划、时间线管理

**特点**：
- 支持 6-12 个任务条目
- 时间轴（月/周分隔）
- 任务条带渐变色
- 任务依赖关系线
- 里程碑菱形标记
- 今日线标注
- 阶段颜色编码

**适用场景**：
- 项目管理看板
- 产品路线图
- 任务排期计划
- 里程碑跟踪

---

## 通用规范

### 配色方案

**咨询风格**（专业、沉稳）：
```
主色：#005587 (McKinsey Blue)
辅色：#0076A8 (Deloitte Blue)
强调：#F5A623 (橙色)
警示：#E74C3C (红色)
成功：#27AE60 (绿色)
```

**通用灵活风格**（现代、活力）：
```
蓝色组：#2196F3, #42A5F5, #90CAF9
绿色组：#4CAF50, #66BB6A, #81C784
橙色组：#FF9800, #FFA726, #FFB74D
紫色组：#9C27B0, #AB47BC, #BA68C8
```

### 文本规范

```
标题：24-32px, font-weight: bold
正文：16-20px, font-weight: normal
数值：32-56px, font-weight: bold
标注：13-15px, font-weight: normal
```

### 间距规范

```
卡片外边距：40-80px (横屏), 60-120px (竖屏)
卡片内边距：20-40px
元素间距：15-30px
标签距离：8-12px
```

### 必须遵守的约束

❌ **禁止使用 `<foreignObject>`**  
✅ 使用 `<tspan>` 手动换行

❌ **禁止硬编码坐标**  
✅ 使用相对位置和比例

❌ **禁止混用字体**  
✅ 统一使用系统 UI 字体栈

---

## 自定义指南

### 修改颜色

所有颜色定义集中在 `<defs>` 中的渐变或直接在元素的 `fill` 属性中：

```xml
<!-- 修改前 -->
<rect fill="#2196F3" />

<!-- 修改后 -->
<rect fill="#FF5722" />
```

### 调整尺寸

保持元素间的比例关系，统一缩放：

```xml
<!-- 柱状图柱宽和间距成比例调整 -->
柱宽: 50px → 60px (增加 20%)
间距: 30px → 36px (同步增加 20%)
```

### 更换数据

1. **文本内容**：直接修改 `<text>` 中的 `<tspan>` 内容
2. **数值**：同步修改图表元素（如柱高、饼图角度）和文本标签
3. **数据点数量**：复制已有元素结构，调整位置

### 添加动画（可选）

为演示增加动效（注意：可能影响兼容性）：

```xml
<rect x="100" y="200" width="0" height="50" fill="#2196F3">
  <animate attributeName="width" from="0" to="200" dur="1s" fill="freeze" />
</rect>
```

---

## 质量检查清单

在使用模板生成图表后，请检查以下要点（CRAP 原则）：

- [ ] **对齐 (Alignment)**：所有元素沿网格线对齐，无随意偏移
- [ ] **对比 (Contrast)**：标题、数值、标注层次清晰
- [ ] **重复 (Repetition)**：相同类型元素（如柱子、卡片）样式一致
- [ ] **亲密性 (Proximity)**：相关元素靠近，不相关元素分离

其他技术检查：

- [ ] `viewBox` 与画布格式一致
- [ ] 无 `<foreignObject>` 元素
- [ ] 文本使用 `<tspan>` 手动换行
- [ ] 颜色对比度符合可访问性标准
- [ ] 字号在规范范围内

---

## 贡献指南

### 新增模板

如需添加新的图表类型：

1. 在本目录创建 `{chart_type}.svg` 文件
2. 遵循通用规范和设计原则
3. 更新本 README.md 的模板列表
4. 在模板文件中添加详细注释

### 优化建议

发现现有模板可优化之处：

1. 在项目 Issues 中描述问题和建议
2. 提供优化后的 SVG 代码示例
3. 说明改进的理由和效果

---

## 参考资源

- **设计规范**：`docs/design_guidelines.md`
- **画布格式**：`docs/canvas_formats.md`
- **工作流程**：`docs/workflow_tutorial.md`
- **速查表**：`docs/quick_reference.md`
- **示例项目**：`examples/`

---

**维护者**：PPT Master Team  
**最后更新**：2025-12-06

